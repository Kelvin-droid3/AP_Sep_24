{% extends "base.html" %}
{% block content %}
  <div class="card">
    <h2>{{ lecture.module_code }} · {{ lecture.module_name }}</h2>
    <p class="muted">
      {{ lecture.room_name }} · {{ lecture.start_time }} - {{ lecture.end_time }}
    </p>
    <a class="button" href="{{ url_for('lecturer_report_csv', lecturer_id=lecture.lecturer_id, lecture_id=lecture.id) }}">
      Download CSV
    </a>
  </div>

  <div class="card">
    <h3>Attendance log</h3>
    {% if attendance %}
    <table>
      <thead>
        <tr>
          <th>Student</th>
          <th>Tapped at</th>
          <th>Method</th>
          <th>Credential</th>
        </tr>
      </thead>
      <tbody>
        {% for record in attendance %}
        <tr>
          <td>{{ record.name }}</td>
          <td>{{ record.tapped_at }}</td>
          <td>{{ record.method }}</td>
          <td>{{ record.credential_type }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <p class="muted">No attendance records yet.</p>
    {% endif %}
  </div>
{% endblock %}
